# –¢–µ—Å—Ç –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç—Ä–æ–∫–∏ —Ç–∞–±–ª–∏—Ü—ã –ø–æ —á–∏—Å–ª–æ–≤–æ–º—É –∏–Ω–¥–µ–∫—Å—É —á–µ—Ä–µ–∑ table.idx[i]

print("============================================================")
print("–¢–ï–°–¢: table.idx[i] - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫–∏ —Ç–∞–±–ª–∏—Ü—ã –ø–æ –∏–Ω–¥–µ–∫—Å—É")
print("============================================================")
print()

# –°–æ–∑–¥–∞–µ–º —Ç–µ—Å—Ç–æ–≤—É—é —Ç–∞–±–ª–∏—Ü—É
global test_data = [
    [1, "Alice", 28, 75000],
    [2, "Bob", 35, 82000],
    [3, "Charlie", 42, 68000],
    [4, "Diana", 29, 91000]
]

global headers = ["id", "name", "age", "salary"]
global table = table_create(test_data, headers)

print("üìä –°–æ–∑–¥–∞–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞:")
show_table(table)
print()

print("üîç –¢–µ—Å—Ç 1: –ë–∞–∑–æ–≤—ã–π –¥–æ—Å—Ç—É–ø –∫ —Å—Ç—Ä–æ–∫–∞–º —á–µ—Ä–µ–∑ table.idx[i]")
print("------------------------------------------------------------")
for i in range(len(table)) do
    local row = table.idx[i]
    print("–°—Ç—Ä–æ–∫–∞ ", i, ": ", row)
next i
print()

print("üîç –¢–µ—Å—Ç 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–∞ –¥–∞–Ω–Ω—ã—Ö —Å—Ç—Ä–æ–∫–∏")
print("------------------------------------------------------------")
local row0 = table.idx[0]
print("–¢–∏–ø table.idx[0]: ", typeof(row0))
if isinstance(row0, array) do
    print("‚úì table.idx[0] —è–≤–ª—è–µ—Ç—Å—è –º–∞—Å—Å–∏–≤–æ–º")
    print("  –î–ª–∏–Ω–∞ –º–∞—Å—Å–∏–≤–∞: ", len(row0))
    print("  –≠–ª–µ–º–µ–Ω—Ç—ã: ", row0)
else
    print("‚úó –û–®–ò–ë–ö–ê: table.idx[0] –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –º–∞—Å—Å–∏–≤–æ–º")
endif
print()

print("üîç –¢–µ—Å—Ç 3: –î–æ—Å—Ç—É–ø –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º —ç–ª–µ–º–µ–Ω—Ç–∞–º —Å—Ç—Ä–æ–∫–∏")
print("------------------------------------------------------------")
local first_row = table.idx[0]
print("–ü–µ—Ä–≤–∞—è —Å—Ç—Ä–æ–∫–∞: ", first_row)
print("  id: ", first_row[0])
print("  name: ", first_row[1])
print("  age: ", first_row[2])
print("  salary: ", first_row[3])
print()

print("üîç –¢–µ—Å—Ç 4: –û—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã")
print("------------------------------------------------------------")
local last_row = table.idx[-1]
print("–ü–æ—Å–ª–µ–¥–Ω—è—è —Å—Ç—Ä–æ–∫–∞ (idx[-1]): ", last_row)
local second_last = table.idx[-2]
print("–ü—Ä–µ–¥–ø–æ—Å–ª–µ–¥–Ω—è—è —Å—Ç—Ä–æ–∫–∞ (idx[-2]): ", second_last)
print()

print("üîç –¢–µ—Å—Ç 5: –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥—Ä–∞–Ω–∏—Ü")
print("------------------------------------------------------------")
try
    local out_of_bounds = table.idx[100]
    print("‚úó –û–®–ò–ë–ö–ê: –î–æ–ª–∂–Ω–∞ –±—ã–ª–∞ –±—ã—Ç—å –æ—à–∏–±–∫–∞ –≤—ã—Ö–æ–¥–∞ –∑–∞ –≥—Ä–∞–Ω–∏—Ü—ã")
catch e
    print("‚úì –ü—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–∞ –æ—à–∏–±–∫–∞ –≤—ã—Ö–æ–¥–∞ –∑–∞ –≥—Ä–∞–Ω–∏—Ü—ã: ", e)
endtry

try
    local negative_out_of_bounds = table.idx[-100]
    print("‚úó –û–®–ò–ë–ö–ê: –î–æ–ª–∂–Ω–∞ –±—ã–ª–∞ –±—ã—Ç—å –æ—à–∏–±–∫–∞ –≤—ã—Ö–æ–¥–∞ –∑–∞ –≥—Ä–∞–Ω–∏—Ü—ã")
catch e
    print("‚úì –ü—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–∞ –æ—à–∏–±–∫–∞ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–≥–æ –∏–Ω–¥–µ–∫—Å–∞: ", e)
endtry
print()

print("üîç –¢–µ—Å—Ç 6: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ —Ü–∏–∫–ª–µ —Å range")
print("------------------------------------------------------------")
print("–ò—Ç–µ—Ä–∞—Ü–∏—è –ø–æ –≤—Å–µ–º —Å—Ç—Ä–æ–∫–∞–º:")
for i in range(len(table)) do
    local row = table.idx[i]
    local name = row[1]
    local salary = row[3]
    print("  ", name, " –ø–æ–ª—É—á–∞–µ—Ç ", salary)
next i
print()

print("üîç –¢–µ—Å—Ç 7: –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ table[0] –≤—ã–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É")
print("------------------------------------------------------------")
try
    local row_by_direct = table[0]
    print("‚úó –û–®–ò–ë–ö–ê: table[0] –Ω–µ –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å, –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—à–∏–±–∫–∞")
catch e
    print("‚úì –ü—Ä–∞–≤–∏–ª—å–Ω–æ: table[0] –≤—ã–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É: ", e)
endtry
print()

print("üîç –¢–µ—Å—Ç 8: –î–æ—Å—Ç—É–ø –∫ –∫–æ–ª–æ–Ω–∫–µ —á–µ—Ä–µ–∑ table['column_name']")
print("------------------------------------------------------------")
local name_column = table["name"]
print("table['name'] (—Ç–∏–ø): ", typeof(name_column))
print("table['name'][0]: ", name_column[0])
print("table['name'][1]: ", name_column[1])
print("‚úì –î–æ—Å—Ç—É–ø –∫ –∫–æ–ª–æ–Ω–∫–µ —á–µ—Ä–µ–∑ table['column_name'] —Ä–∞–±–æ—Ç–∞–µ—Ç")
print()

print("üîç –¢–µ—Å—Ç 9: –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö —Å—Ç—Ä–æ–∫ —Ç–∞–±–ª–∏—Ü—ã")
print("------------------------------------------------------------")

print("–í—Å–µ —Å—Ç—Ä–æ–∫–∏ —á–µ—Ä–µ–∑ table.idx[i]:")
for i in range(len(table)) do
    local row = table.idx[i]
    print("  –°—Ç—Ä–æ–∫–∞ ", i, ": id=", row[0], ", name=", row[1], ", age=", row[2], ", salary=", row[3])
next i
print()

print("============================================================")
print("‚úÖ –¢–ï–°–¢ –ó–ê–í–ï–†–®–ï–ù")
print("============================================================")

