# Тест базовой функциональности contains
# Проверяем, что contains работает правильно для строк

print("============================================================")
print("Тест 1: Базовая проверка contains")
print("============================================================")

# Тест 1.1: Простая проверка подстроки
local test_str = "quarter_2025_Q1"
local substring = "quarter_"

print("Тест 1.1: contains(\"", test_str, "\", \"", substring, "\")")
local result1 = contains(test_str, substring)
print("  Результат: ", result1)
print("  Ожидается: true")
if result1 == true do
    print("  ✅ ПРОШЕЛ")
else
    print("  ❌ НЕ ПРОШЕЛ - содержит должно вернуть true")
endif
print()

# Тест 1.2: Проверка с not
print("Тест 1.2: not contains(\"", test_str, "\", \"", substring, "\")")
local result2 = not contains(test_str, substring)
print("  Результат: ", result2)
print("  Ожидается: false")
if result2 == false do
    print("  ✅ ПРОШЕЛ")
else
    print("  ❌ НЕ ПРОШЕЛ - not contains должно вернуть false")
endif
print()

# Тест 1.3: Проверка условия if
print("Тест 1.3: if not contains(\"", test_str, "\", \"", substring, "\")")
local entered_if = false
if not contains(test_str, substring) do
    entered_if = true
    print("  ⚠️  ВОШЕЛ В IF - это неправильно!")
else
    print("  ✅ НЕ ВОШЕЛ В IF - это правильно")
endif
print()

# Тест 1.4: Проверка с точкой
print("Тест 1.4: contains(\"", test_str, "\", \".\")")
local result3 = contains(test_str, ".")
print("  Результат: ", result3)
print("  Ожидается: false")
if result3 == false do
    print("  ✅ ПРОШЕЛ")
else
    print("  ❌ НЕ ПРОШЕЛ - строка не содержит точку")
endif
print()

# Тест 1.5: Комбинированное условие
print("Тест 1.5: if not contains(\"", test_str, "\", \"quarter_\") and not contains(\"", test_str, "\", \".\")")
local entered_combined = false
if not contains(test_str, "quarter_") and not contains(test_str, ".") do
    entered_combined = true
    print("  ⚠️  ВОШЕЛ В IF - это неправильно!")
else
    print("  ✅ НЕ ВОШЕЛ В IF - это правильно")
endif
print()

print("============================================================")
print("Тест 2: Проверка с различными строками")
print("============================================================")

# Тест 2.1: Строка с точкой
local test_with_dot = "file.csv"
print("Тест 2.1: contains(\"", test_with_dot, "\", \".\")")
local result4 = contains(test_with_dot, ".")
print("  Результат: ", result4)
print("  Ожидается: true")
if result4 == true do
    print("  ✅ ПРОШЕЛ")
else
    print("  ❌ НЕ ПРОШЕЛ")
endif
print()

# Тест 2.2: Обычный месяц
local test_month = "03"
print("Тест 2.2: contains(\"", test_month, "\", \"quarter_\")")
local result5 = contains(test_month, "quarter_")
print("  Результат: ", result5)
print("  Ожидается: false")
if result5 == false do
    print("  ✅ ПРОШЕЛ")
else
    print("  ❌ НЕ ПРОШЕЛ")
endif
print()

# Тест 2.3: Условие для обычного месяца
print("Тест 2.3: if not contains(\"", test_month, "\", \"quarter_\") and not contains(\"", test_month, "\", \".\")")
local entered_month = false
if not contains(test_month, "quarter_") and not contains(test_month, ".") do
    entered_month = true
    print("  ✅ ВОШЕЛ В IF - это правильно")
else
    print("  ❌ НЕ ВОШЕЛ В IF - это неправильно!")
endif
print()

print("============================================================")
print("✅ Все тесты завершены")
print("============================================================")

