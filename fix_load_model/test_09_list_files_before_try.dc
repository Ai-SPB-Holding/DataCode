# –¢–µ—Å—Ç 9: list_files –ø–µ—Ä–µ–¥ try
print("–¢–µ—Å—Ç 9: list_files –ø–µ—Ä–µ–¥ try")
print("=============================")

# –ö–æ–¥ –ø–µ—Ä–µ–¥ —Ñ—É–Ω–∫—Ü–∏–µ–π
print("–ö–æ–¥ –ø–µ—Ä–µ–¥ —Ñ—É–Ω–∫—Ü–∏–µ–π")

# –§—É–Ω–∫—Ü–∏—è —Å –≤–ª–æ–∂–µ–Ω–Ω—ã–º–∏ —Ü–∏–∫–ª–∞–º–∏
global function merge_tables(tables) do
    if len(tables) == 0 do
        return null
    endif
    
    local headers = table_headers(tables[0])
    local all_rows = []
    
    for table in tables do
        for row in table do
            all_rows = push(all_rows, row)
        next row
    next table
    
    return table_create(all_rows, headers)
endfunction

# –ö–æ–¥ –ø–æ—Å–ª–µ —Ñ—É–Ω–∫—Ü–∏–∏
print("–ö–æ–¥ –ø–æ—Å–ª–µ —Ñ—É–Ω–∫—Ü–∏–∏")

# –ë–∞–∑–æ–≤—ã–π –ø—É—Ç—å –∫ –¥–∞–Ω–Ω—ã–º
global base_path = getcwd() / "model_data"

print("üìä –ó–∞–≥—Ä—É–∑–∫–∞ –µ–∂–µ–º–µ—Å—è—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö...")
# –ü–æ–ª—É—á–∞–µ–º —Å–ø–∏—Å–æ–∫ –≥–æ–¥–æ–≤ –∏–∑ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ model_data
global year_dirs = list_files(base_path)
print("  –ù–∞–π–¥–µ–Ω–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ model_data: ", len(year_dirs))

# –ü—Ä–æ–±—É–µ–º try –ø–æ—Å–ª–µ list_files
try
    print("  –í–Ω—É—Ç—Ä–∏ try")
catch e
    print("  –û—à–∏–±–∫–∞: ", e)
endtry

print("‚úì –¢–µ—Å—Ç –∑–∞–≤–µ—Ä—à–µ–Ω")

