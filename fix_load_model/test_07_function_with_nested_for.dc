# Тест 7: Функция с вложенными циклами for
print("Тест 7: Функция с вложенными циклами for")
print("=========================================")

# Функция для объединения таблиц (с вложенными циклами)
global function merge_tables(tables) do
    if len(tables) == 0 do
        return null
    endif
    
    # Получаем заголовки из первой таблицы
    local headers = table_headers(tables[0])
    
    # Собираем все строки из всех таблиц
    local all_rows = []
    
    for table in tables do
        # Итерируемся по строкам таблицы (каждая строка - это массив)
        for row in table do
            all_rows = push(all_rows, row)
        next row
    next table
    
    # Создаем объединенную таблицу
    return table_create(all_rows, headers)
endfunction

print("После функции merge_tables с вложенными циклами")

# Пробуем try сразу после функции
try
    print("  Внутри try")
catch e
    print("  Ошибка: ", e)
endtry

print("✓ Тест завершен")

